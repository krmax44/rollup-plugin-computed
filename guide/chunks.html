<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      Chunks | computed ðŸ“‚
    </title>
    <meta name="description" content="Compute data at build time.">
    <link rel="stylesheet" href="/rollup-plugin-computed/assets/style.3d4e16a3.css">
    <link rel="modulepreload" href="/rollup-plugin-computed/assets/Home.35812e17.js">
    <link rel="modulepreload" href="/rollup-plugin-computed/assets/app.7cbc1c56.js">
    <link rel="modulepreload" href="/rollup-plugin-computed/assets/guide_chunks.md.c063828c.lean.js">
    <link rel="modulepreload" href="/rollup-plugin-computed/assets/app.7cbc1c56.js">
    
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-5df6160f><div class="sidebar-button" data-v-5df6160f><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/rollup-plugin-computed/" aria-label="computed ðŸ“‚, back to home" data-v-5df6160f data-v-8dbfef3c><!----> computed ðŸ“‚</a><div class="flex-grow" data-v-5df6160f></div><div class="nav" data-v-5df6160f><nav class="nav-links" data-v-5df6160f data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item active" href="/rollup-plugin-computed/guide/" data-v-45eb32c6>Guide <!----></a></div></div><!--]--><!----><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item isExternal" href="https://github.com/krmax44/rollup-plugin-computed" target="_blank" rel="noopener noreferrer" data-v-45eb32c6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-45eb32c6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-58e261f2><nav class="nav-links nav" data-v-58e261f2 data-v-38e3b123><!--[--><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item active" href="/rollup-plugin-computed/guide/" data-v-45eb32c6>Guide <!----></a></div></div><!--]--><!----><div class="item" data-v-38e3b123><div class="nav-link" data-v-38e3b123 data-v-45eb32c6><a class="item isExternal" href="https://github.com/krmax44/rollup-plugin-computed" target="_blank" rel="noopener noreferrer" data-v-45eb32c6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-45eb32c6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-58e261f2><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Introduction</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/rollup-plugin-computed/guide/">What is this plugin?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/rollup-plugin-computed/guide/getting-started">Getting started</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Advanced</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/rollup-plugin-computed/guide/chunks">Chunks</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#fn">fn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#serializer">serializer?</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#custom-serializers">Custom serializers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#json-collection">JSON collection</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#split">split?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#filename">fileName?</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/rollup-plugin-computed/guide/assets">Assets</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-d36a7fda><div class="container" data-v-d36a7fda><!--[--><!--]--><div class="content" data-v-d36a7fda><div data-v-d36a7fda><h1 id="chunks"><a class="header-anchor" href="#chunks" aria-hidden="true">#</a> Chunks</h1><p>For simple usage, passing an object of functions to the plugin is adequate. Sometimes though, you probably want to make use of the options below.</p><p>To specify options, you can register computers like this:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Computers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-computed&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> computers<span class="token operator">:</span> Computers <span class="token operator">=</span> <span class="token punctuation">{</span>
	example<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// options go here</span>
		serializer<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
		fileName<span class="token operator">:</span> <span class="token string">&#39;example-data.js&#39;</span><span class="token punctuation">,</span>
		split<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

		<span class="token comment">// the computer function</span>
		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&#39;it works!&#39;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="fn"><a class="header-anchor" href="#fn" aria-hidden="true">#</a> <code>fn</code></h2><p>The computer function. It will be executed at build-time (never in the browser) and the returned data can be imported in your app.</p><h2 id="serializer"><a class="header-anchor" href="#serializer" aria-hidden="true">#</a> <code>serializer?</code></h2><p>In our computer function, we pass back a string. To import it though, we need to return an ES module. The serializer takes care of transforming our returned data to ESM. By default, it is set to <code>json</code>, which will <code>JSON.stringify</code> the data and set that as the default export.</p><p>You can disable serialization by passing <code>false</code>.</p><h3 id="custom-serializers"><a class="header-anchor" href="#custom-serializers" aria-hidden="true">#</a> Custom serializers</h3><p>You can define a custom serializer as such:</p><div class="language-js"><pre><code><span class="token keyword">const</span> computers <span class="token operator">=</span> <span class="token punctuation">{</span>
	example<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function">serializer</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        const text = &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;;
        export { text };
      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&#39;it works!&#39;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Which would yield the following module:</p><div class="language-js"><pre><code><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">&#39;it works!&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>And can be imported as follows:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;example.computed&#39;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="json-collection"><a class="header-anchor" href="#json-collection" aria-hidden="true">#</a> JSON collection</h3><p>There is also another serializer built in called <code>json-collection</code>. Sometimes it&#39;s handy to return not just one chunk, but multiple ones at a time - for example when returning a set of blog posts. Yet, the client might only need some of these.</p><p>When setting <code>serializer</code> to <code>json-collection</code>, you can return an object like this:</p><div class="language-js"><pre><code><span class="token punctuation">{</span>
	serializer<span class="token operator">:</span> <span class="token string">&#39;json-collection&#39;</span><span class="token punctuation">,</span>
	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			firstPost<span class="token operator">:</span> <span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">,</span>
			secondPost<span class="token operator">:</span> <span class="token string">&#39;My fingers hurt from writing&#39;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In your app, you can then load each &quot;post&quot; on-demand:</p><div class="language-js"><pre><code><span class="token keyword">import</span> posts <span class="token keyword">from</span> <span class="token string">&#39;example.computed&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// let&#39;s get the first post</span>
<span class="token keyword">const</span> firstPost <span class="token operator">=</span> <span class="token keyword">await</span> posts<span class="token punctuation">.</span><span class="token function">firstPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>firstPost<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; Hello!</span>
</code></pre></div><h2 id="split"><a class="header-anchor" href="#split" aria-hidden="true">#</a> <code>split?</code></h2><p>To force-split the computed data into a seperate file, set <code>split</code> to <code>true</code>. Otherwise, it will be inlined into the chunk of the module that imports the computer. Rollup is smart enough to split it automatically in most cases, if for example multiple modules require the computer.</p><h2 id="filename"><a class="header-anchor" href="#filename" aria-hidden="true">#</a> <code>fileName?</code></h2><p>If the computer gets split, you can set a custom filename here. This overrides the default Rollup filename.</p></div></div><footer class="page-footer" data-v-d36a7fda data-v-5a019cc9><div class="edit" data-v-5a019cc9><div class="edit-link" data-v-5a019cc9 data-v-3ae295f1><a class="link" href="https://github.com/krmax44/rollup-plugin-computed/edit/main/docs/guide/chunks.md" target="_blank" rel="noopener noreferrer" data-v-3ae295f1>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-3ae295f1><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-5a019cc9><p class="last-updated" data-v-5a019cc9 data-v-52854a16><span class="prefix" data-v-52854a16>Last Updated:</span><span class="datetime" data-v-52854a16></span></p></div></footer><div class="next-and-prev-link" data-v-d36a7fda data-v-6683615c><div class="container" data-v-6683615c><div class="prev" data-v-6683615c><a class="link" href="/rollup-plugin-computed/guide/getting-started" data-v-6683615c><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-6683615c><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-6683615c>Getting started</span></a></div><div class="next" data-v-6683615c><a class="link" href="/rollup-plugin-computed/guide/assets" data-v-6683615c><span class="text" data-v-6683615c>Assets</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-6683615c><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"examples.md\":\"d38aaee6\",\"index.md\":\"0ccd8f5c\",\"guide_assets.md\":\"18dbfee6\",\"guide_chunks.md\":\"c063828c\",\"guide_getting-started.md\":\"cf8ece6f\",\"guide_index.md\":\"0cf88c7b\"}")</script>
    <script type="module" async src="/rollup-plugin-computed/assets/app.7cbc1c56.js"></script>
  </body>
</html>